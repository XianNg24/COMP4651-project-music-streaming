{"id":"C9pS","dependencies":[{"name":"/Users/spittela/code/giphlify/package.json","includedInParent":true,"mtime":1599683869183},{"name":"/Users/spittela/code/giphlify/.babelrc","includedInParent":true,"mtime":1599669969128},{"name":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/fetch-http-handler/package.json","includedInParent":true,"mtime":1599668814063},{"name":"tslib","loc":{"line":4,"column":22},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/fetch-http-handler/dist/cjs/fetch-http-handler.js","resolved":"/Users/spittela/code/giphlify/node_modules/tslib/tslib.es6.js"},{"name":"@aws-sdk/protocol-http","loc":{"line":5,"column":30},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/fetch-http-handler/dist/cjs/fetch-http-handler.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/protocol-http/dist/cjs/index.js"},{"name":"@aws-sdk/querystring-builder","loc":{"line":6,"column":36},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/fetch-http-handler/dist/cjs/fetch-http-handler.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/querystring-builder/dist/cjs/index.js"},{"name":"./request-timeout","loc":{"line":7,"column":32},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/fetch-http-handler/dist/cjs/fetch-http-handler.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/fetch-http-handler/dist/cjs/request-timeout.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.FetchHttpHandler=void 0;var e=require(\"tslib\"),r=require(\"@aws-sdk/protocol-http\"),t=require(\"@aws-sdk/querystring-builder\"),o=require(\"./request-timeout\"),n=function(){function n(e){void 0===e&&(e={}),this.httpOptions=e}return n.prototype.destroy=function(){},n.prototype.handle=function(n,s){var u=null==s?void 0:s.abortSignal,a=this.httpOptions.requestTimeout;if(null==u?void 0:u.aborted){var i=new Error(\"Request aborted\");return i.name=\"AbortError\",Promise.reject(i)}var d=n.path;if(n.query){var l=t.buildQueryString(n.query);l&&(d+=\"?\"+l)}var p=n.port,h=n.protocol+\"//\"+n.hostname+(p?\":\"+p:\"\")+d,b={body:n.body,headers:new Headers(n.headers),method:n.method};\"undefined\"!=typeof AbortController&&(b.signal=u);var c=new Request(h,b),v=[fetch(c).then(function(t){var o,n,s=t.headers,u={};try{for(var a=e.__values(s.entries()),i=a.next();!i.done;i=a.next()){var d=i.value;u[d[0]]=d[1]}}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return void 0!==t.body?{response:new r.HttpResponse({headers:u,statusCode:t.status,body:t.body})}:t.blob().then(function(e){return{response:new r.HttpResponse({headers:u,statusCode:t.status,body:e})}})}),o.requestTimeout(a)];return u&&v.push(new Promise(function(e,r){u.onabort=function(){var e=new Error(\"Request aborted\");e.name=\"AbortError\",r(e)}})),Promise.race(v)},n}();exports.FetchHttpHandler=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":123}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":125}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":133}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":159}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":161}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":169}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":201}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":203}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":211}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":232}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":234}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":2},"generated":{"line":1,"column":245}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":2},"generated":{"line":1,"column":254}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":256}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":264}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":268}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":272}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":274}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":278}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":283}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":295}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":106,"column":0},"generated":{"line":1,"column":297}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":304}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":306}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":316}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":324}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":28,"column":2},"generated":{"line":1,"column":337}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":28,"column":2},"generated":{"line":1,"column":339}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":28,"column":2},"generated":{"line":1,"column":349}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":28,"column":2},"generated":{"line":1,"column":356}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":28,"column":9},"generated":{"line":1,"column":365}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":28,"column":31},"generated":{"line":1,"column":367}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":29,"column":4},"generated":{"line":1,"column":370}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":29,"column":10},"generated":{"line":1,"column":374}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":29,"column":24},"generated":{"line":1,"column":376}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":29,"column":24},"generated":{"line":1,"column":382}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":29,"column":31},"generated":{"line":1,"column":389}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":29,"column":24},"generated":{"line":1,"column":391}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":29,"column":33},"generated":{"line":1,"column":393}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":30,"column":10},"generated":{"line":1,"column":405}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":30,"column":31},"generated":{"line":1,"column":407}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":30,"column":36},"generated":{"line":1,"column":412}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":30,"column":48},"generated":{"line":1,"column":424}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":1,"column":439}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":442}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":448}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":33,"column":19},"generated":{"line":1,"column":455}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":457}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":33,"column":21},"generated":{"line":1,"column":459}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":33,"column":30},"generated":{"line":1,"column":467}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":34,"column":6},"generated":{"line":1,"column":468}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":34,"column":12},"generated":{"line":1,"column":472}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":34,"column":25},"generated":{"line":1,"column":474}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":34,"column":29},"generated":{"line":1,"column":478}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":34,"column":35},"generated":{"line":1,"column":484}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":36,"column":6},"generated":{"line":1,"column":503}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":35,"column":6},"generated":{"line":1,"column":510}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":35,"column":17},"generated":{"line":1,"column":512}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":35,"column":24},"generated":{"line":1,"column":517}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":36,"column":13},"generated":{"line":1,"column":530}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":36,"column":21},"generated":{"line":1,"column":538}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":36,"column":28},"generated":{"line":1,"column":545}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":1,"column":548}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":552}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":39,"column":15},"generated":{"line":1,"column":554}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":39,"column":23},"generated":{"line":1,"column":556}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":561}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":564}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":40,"column":16},"generated":{"line":1,"column":566}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":40,"column":23},"generated":{"line":1,"column":572}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":41,"column":6},"generated":{"line":1,"column":573}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":41,"column":12},"generated":{"line":1,"column":577}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":41,"column":26},"generated":{"line":1,"column":579}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":41,"column":26},"generated":{"line":1,"column":581}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":41,"column":43},"generated":{"line":1,"column":598}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":41,"column":51},"generated":{"line":1,"column":600}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":1,"column":607}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":611}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":43,"column":16},"generated":{"line":1,"column":614}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":43,"column":20},"generated":{"line":1,"column":618}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":1,"column":621}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":47,"column":10},"generated":{"line":1,"column":625}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":47,"column":17},"generated":{"line":1,"column":627}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":47,"column":25},"generated":{"line":1,"column":629}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":10},"generated":{"line":1,"column":634}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":19},"generated":{"line":1,"column":636}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":27},"generated":{"line":1,"column":638}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":35},"generated":{"line":1,"column":647}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":40},"generated":{"line":1,"column":652}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":48},"generated":{"line":1,"column":654}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":59},"generated":{"line":1,"column":664}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":66},"generated":{"line":1,"column":666}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":70},"generated":{"line":1,"column":670}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":79},"generated":{"line":1,"column":672}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":48,"column":84},"generated":{"line":1,"column":676}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":678}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":49,"column":40},"generated":{"line":1,"column":680}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":50,"column":6},"generated":{"line":1,"column":681}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":50,"column":12},"generated":{"line":1,"column":686}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":50,"column":20},"generated":{"line":1,"column":688}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":1,"column":693}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":51,"column":15},"generated":{"line":1,"column":701}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":51,"column":19},"generated":{"line":1,"column":705}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":51,"column":27},"generated":{"line":1,"column":713}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":51,"column":35},"generated":{"line":1,"column":715}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":1,"column":724}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":52,"column":14},"generated":{"line":1,"column":731}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":52,"column":22},"generated":{"line":1,"column":733}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":56,"column":35},"generated":{"line":1,"column":741}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":56,"column":15},"generated":{"line":1,"column":761}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":57,"column":7},"generated":{"line":1,"column":779}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":57,"column":38},"generated":{"line":1,"column":781}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":57,"column":42},"generated":{"line":1,"column":788}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":60,"column":4},"generated":{"line":1,"column":791}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":60,"column":10},"generated":{"line":1,"column":795}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":60,"column":25},"generated":{"line":1,"column":797}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":60,"column":29},"generated":{"line":1,"column":801}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":60,"column":37},"generated":{"line":1,"column":809}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":60,"column":42},"generated":{"line":1,"column":811}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":61,"column":10},"generated":{"line":1,"column":814}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":61,"column":27},"generated":{"line":1,"column":816}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":62,"column":6},"generated":{"line":1,"column":817}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":823}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":62,"column":26},"generated":{"line":1,"column":826}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":62,"column":31},"generated":{"line":1,"column":831}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":62,"column":32},"generated":{"line":1,"column":840}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":63,"column":14},"generated":{"line":1,"column":851}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":63,"column":34},"generated":{"line":1,"column":853}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":63,"column":43},"generated":{"line":1,"column":855}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":64,"column":14},"generated":{"line":1,"column":863}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":64,"column":46},"generated":{"line":1,"column":865}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":8},"generated":{"line":1,"column":872}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":27},"generated":{"line":1,"column":876}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":27},"generated":{"line":1,"column":880}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":27},"generated":{"line":1,"column":882}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":27},"generated":{"line":1,"column":884}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":44},"generated":{"line":1,"column":893}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":57},"generated":{"line":1,"column":895}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":66},"generated":{"line":1,"column":906}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":66},"generated":{"line":1,"column":908}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":66},"generated":{"line":1,"column":910}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":66},"generated":{"line":1,"column":918}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":66},"generated":{"line":1,"column":920}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":66},"generated":{"line":1,"column":925}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":66},"generated":{"line":1,"column":927}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":66},"generated":{"line":1,"column":929}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":68},"generated":{"line":1,"column":936}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":13},"generated":{"line":1,"column":937}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":19},"generated":{"line":1,"column":941}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":23},"generated":{"line":1,"column":943}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":66,"column":23},"generated":{"line":1,"column":945}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":67,"column":10},"generated":{"line":1,"column":951}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":67,"column":29},"generated":{"line":1,"column":953}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":67,"column":34},"generated":{"line":1,"column":955}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":67,"column":40},"generated":{"line":1,"column":959}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":67,"column":45},"generated":{"line":1,"column":961}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":73,"column":8},"generated":{"line":1,"column":1062}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":70,"column":52},"generated":{"line":1,"column":1074}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":70,"column":34},"generated":{"line":1,"column":1078}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":70,"column":43},"generated":{"line":1,"column":1080}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":83,"column":15},"generated":{"line":1,"column":1085}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":84,"column":10},"generated":{"line":1,"column":1086}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":84,"column":20},"generated":{"line":1,"column":1095}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":84,"column":24},"generated":{"line":1,"column":1099}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":84,"column":24},"generated":{"line":1,"column":1101}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":84,"column":37},"generated":{"line":1,"column":1114}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":85,"column":12},"generated":{"line":1,"column":1115}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":85,"column":21},"generated":{"line":1,"column":1123}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":86,"column":12},"generated":{"line":1,"column":1125}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":86,"column":24},"generated":{"line":1,"column":1136}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":86,"column":33},"generated":{"line":1,"column":1138}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":87,"column":12},"generated":{"line":1,"column":1145}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":87,"column":18},"generated":{"line":1,"column":1150}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":87,"column":27},"generated":{"line":1,"column":1152}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":74,"column":17},"generated":{"line":1,"column":1160}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":74,"column":26},"generated":{"line":1,"column":1162}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":74,"column":33},"generated":{"line":1,"column":1169}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":74,"column":38},"generated":{"line":1,"column":1174}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":74,"column":39},"generated":{"line":1,"column":1183}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":74,"column":48},"generated":{"line":1,"column":1186}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":74,"column":48},"generated":{"line":1,"column":1192}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":75,"column":12},"generated":{"line":1,"column":1193}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":75,"column":22},"generated":{"line":1,"column":1202}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":75,"column":26},"generated":{"line":1,"column":1206}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":75,"column":26},"generated":{"line":1,"column":1208}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":75,"column":39},"generated":{"line":1,"column":1221}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":76,"column":14},"generated":{"line":1,"column":1222}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":76,"column":23},"generated":{"line":1,"column":1230}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":77,"column":14},"generated":{"line":1,"column":1232}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":77,"column":26},"generated":{"line":1,"column":1243}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":77,"column":35},"generated":{"line":1,"column":1245}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":78,"column":14},"generated":{"line":1,"column":1252}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":78,"column":18},"generated":{"line":1,"column":1257}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":91,"column":6},"generated":{"line":1,"column":1266}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":91,"column":6},"generated":{"line":1,"column":1268}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":91,"column":21},"generated":{"line":1,"column":1283}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":104,"column":4},"generated":{"line":1,"column":1287}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":93,"column":8},"generated":{"line":1,"column":1294}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":94,"column":6},"generated":{"line":1,"column":1297}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":94,"column":21},"generated":{"line":1,"column":1299}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":95,"column":8},"generated":{"line":1,"column":1304}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":95,"column":12},"generated":{"line":1,"column":1308}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":95,"column":27},"generated":{"line":1,"column":1316}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":95,"column":28},"generated":{"line":1,"column":1325}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":95,"column":37},"generated":{"line":1,"column":1327}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":96,"column":10},"generated":{"line":1,"column":1330}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":96,"column":22},"generated":{"line":1,"column":1332}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":96,"column":32},"generated":{"line":1,"column":1340}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":1,"column":1351}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":97,"column":18},"generated":{"line":1,"column":1355}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":97,"column":31},"generated":{"line":1,"column":1357}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":97,"column":35},"generated":{"line":1,"column":1361}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":97,"column":41},"generated":{"line":1,"column":1367}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":98,"column":12},"generated":{"line":1,"column":1386}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":98,"column":23},"generated":{"line":1,"column":1388}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":98,"column":30},"generated":{"line":1,"column":1393}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":99,"column":12},"generated":{"line":1,"column":1406}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":99,"column":19},"generated":{"line":1,"column":1408}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":104,"column":11},"generated":{"line":1,"column":1415}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":104,"column":19},"generated":{"line":1,"column":1423}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":104,"column":24},"generated":{"line":1,"column":1428}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":106,"column":0},"generated":{"line":1,"column":1432}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":1434}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":20,"column":13},"generated":{"line":1,"column":1437}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":20,"column":13},"generated":{"line":1,"column":1445}},{"source":"../../src/fetch-http-handler.ts","name":null,"original":{"line":20,"column":13},"generated":{"line":1,"column":1462}}],"sources":{"../../src/fetch-http-handler.ts":"import { HttpHandler, HttpRequest, HttpResponse } from \"@aws-sdk/protocol-http\";\nimport { buildQueryString } from \"@aws-sdk/querystring-builder\";\nimport { HeaderBag, HttpHandlerOptions } from \"@aws-sdk/types\";\n\nimport { requestTimeout } from \"./request-timeout\";\n\ndeclare let AbortController: any;\n\n/**\n * Represents the http options that can be passed to a browser http client.\n */\nexport interface BrowserHttpOptions {\n  /**\n   * The number of milliseconds a request can take before being automatically\n   * terminated.\n   */\n  requestTimeout?: number;\n}\n\nexport class FetchHttpHandler implements HttpHandler {\n  constructor(private readonly httpOptions: BrowserHttpOptions = {}) {}\n\n  destroy(): void {\n    // Do nothing. TLS and HTTP/2 connection pooling is handled by the\n    // browser.\n  }\n\n  handle(request: HttpRequest, options: HttpHandlerOptions): Promise<{ response: HttpResponse }> {\n    const abortSignal = options?.abortSignal;\n    const requestTimeoutInMs = this.httpOptions.requestTimeout;\n\n    // if the request was already aborted, prevent doing extra work\n    if (abortSignal?.aborted) {\n      const abortError = new Error(\"Request aborted\");\n      abortError.name = \"AbortError\";\n      return Promise.reject(abortError);\n    }\n\n    let path = request.path;\n    if (request.query) {\n      const queryString = buildQueryString(request.query);\n      if (queryString) {\n        path += `?${queryString}`;\n      }\n    }\n\n    const port = request.port;\n    const url = `${request.protocol}//${request.hostname}${port ? `:${port}` : \"\"}${path}`;\n    const requestOptions: RequestInit = {\n      body: request.body,\n      headers: new Headers(request.headers),\n      method: request.method,\n    };\n\n    // some browsers support abort signal\n    if (typeof AbortController !== \"undefined\") {\n      (requestOptions as any)[\"signal\"] = abortSignal;\n    }\n\n    const fetchRequest = new Request(url, requestOptions);\n    const raceOfPromises = [\n      fetch(fetchRequest).then((response) => {\n        const fetchHeaders: any = response.headers;\n        const transformedHeaders: HeaderBag = {};\n\n        for (const pair of <Array<string[]>>fetchHeaders.entries()) {\n          transformedHeaders[pair[0]] = pair[1];\n        }\n\n        const hasReadableStream = response.body !== undefined;\n\n        // Return the response with buffered body\n        if (!hasReadableStream) {\n          return response.blob().then((body) => ({\n            response: new HttpResponse({\n              headers: transformedHeaders,\n              statusCode: response.status,\n              body,\n            }),\n          }));\n        }\n        // Return the response with streaming body\n        return {\n          response: new HttpResponse({\n            headers: transformedHeaders,\n            statusCode: response.status,\n            body: response.body,\n          }),\n        };\n      }),\n      requestTimeout(requestTimeoutInMs),\n    ];\n    if (abortSignal) {\n      raceOfPromises.push(\n        new Promise<never>((resolve, reject) => {\n          abortSignal.onabort = () => {\n            const abortError = new Error(\"Request aborted\");\n            abortError.name = \"AbortError\";\n            reject(abortError);\n          };\n        })\n      );\n    }\n    return Promise.race(raceOfPromises);\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"0b7604a6fbd55c5508d9d96d63b5ec83","cacheData":{"env":{}}}