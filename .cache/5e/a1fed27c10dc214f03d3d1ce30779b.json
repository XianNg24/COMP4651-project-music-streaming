{"id":"IALR","dependencies":[{"name":"/Users/spittela/code/giphlify/package.json","includedInParent":true,"mtime":1599671784193},{"name":"/Users/spittela/code/giphlify/.babelrc","includedInParent":true,"mtime":1599669969128},{"name":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/fetch-http-handler/package.json","includedInParent":true,"mtime":1599668814063},{"name":"tslib","loc":{"line":4,"column":22},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/fetch-http-handler/dist/cjs/stream-collector.js","resolved":"/Users/spittela/code/giphlify/node_modules/tslib/tslib.es6.js"},{"name":"@aws-sdk/util-base64-browser","loc":{"line":5,"column":36},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/fetch-http-handler/dist/cjs/stream-collector.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/util-base64-browser/dist/cjs/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.streamCollector=void 0;var e=require(\"tslib\"),r=require(\"@aws-sdk/util-base64-browser\");function t(t){return e.__awaiter(this,void 0,void 0,function(){var n,a;return e.__generator(this,function(e){switch(e.label){case 0:return[4,o(t)];case 1:return n=e.sent(),a=r.fromBase64(n),[2,new Uint8Array(a)]}})})}function n(r){return e.__awaiter(this,void 0,void 0,function(){var t,n,o,a,i,s,u;return e.__generator(this,function(e){switch(e.label){case 0:t=new Uint8Array(0),n=r.getReader(),o=!1,e.label=1;case 1:return o?[3,3]:[4,n.read()];case 2:return a=e.sent(),i=a.done,(s=a.value)&&(u=t,(t=new Uint8Array(u.length+s.length)).set(u),t.set(s,u.length)),o=i,[3,1];case 3:return[2,t]}})})}function o(e){return new Promise(function(r,t){var n=new FileReader;n.onloadend=function(){var e;if(2!==n.readyState)return t(new Error(\"Reader aborted too early\"));var o=null!==(e=n.result)&&void 0!==e?e:\"\",a=o.indexOf(\",\"),i=a>-1?a+1:o.length;r(o.substring(i))},n.onabort=function(){return t(new Error(\"Read aborted\"))},n.onerror=function(){return t(n.error)},n.readAsDataURL(e)})}exports.streamCollector=function(e){return e instanceof Blob?t(e):n(e)};"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/stream-collector.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":122}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":124}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":132}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":164}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":13,"column":15},"generated":{"line":1,"column":173}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":13,"column":27},"generated":{"line":1,"column":175}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":14,"column":17},"generated":{"line":1,"column":296}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":14,"column":17},"generated":{"line":1,"column":302}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":14,"column":17},"generated":{"line":1,"column":303}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":14,"column":23},"generated":{"line":1,"column":305}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":14,"column":36},"generated":{"line":1,"column":307}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":318}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":14,"column":8},"generated":{"line":1,"column":325}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":14,"column":17},"generated":{"line":1,"column":327}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":14,"column":17},"generated":{"line":1,"column":329}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":336}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":15,"column":22},"generated":{"line":1,"column":338}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":15,"column":22},"generated":{"line":1,"column":340}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":15,"column":33},"generated":{"line":1,"column":351}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":354}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":355}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":16,"column":9},"generated":{"line":1,"column":357}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":16,"column":13},"generated":{"line":1,"column":361}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":16,"column":24},"generated":{"line":1,"column":372}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":381}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":19,"column":15},"generated":{"line":1,"column":390}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":19,"column":29},"generated":{"line":1,"column":392}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":523}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":20,"column":12},"generated":{"line":1,"column":525}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":20,"column":16},"generated":{"line":1,"column":529}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":20,"column":27},"generated":{"line":1,"column":540}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":543}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":21,"column":17},"generated":{"line":1,"column":545}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":21,"column":24},"generated":{"line":1,"column":547}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":22,"column":6},"generated":{"line":1,"column":559}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":22,"column":15},"generated":{"line":1,"column":562}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":23,"column":10},"generated":{"line":1,"column":588}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":590}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":591}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":593}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":28},"generated":{"line":1,"column":596}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":28},"generated":{"line":1,"column":597}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":34},"generated":{"line":1,"column":599}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":41},"generated":{"line":1,"column":601}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":10},"generated":{"line":1,"column":623}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":28},"generated":{"line":1,"column":625}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":28},"generated":{"line":1,"column":627}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":12},"generated":{"line":1,"column":634}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":16},"generated":{"line":1,"column":636}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":16},"generated":{"line":1,"column":638}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":18},"generated":{"line":1,"column":644}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":23},"generated":{"line":1,"column":646}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":24,"column":23},"generated":{"line":1,"column":648}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":26,"column":12},"generated":{"line":1,"column":657}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":26,"column":20},"generated":{"line":1,"column":659}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":27,"column":6},"generated":{"line":1,"column":662}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":27,"column":12},"generated":{"line":1,"column":664}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":27,"column":16},"generated":{"line":1,"column":668}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":27,"column":27},"generated":{"line":1,"column":679}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":27,"column":33},"generated":{"line":1,"column":681}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":27,"column":42},"generated":{"line":1,"column":688}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":27,"column":48},"generated":{"line":1,"column":690}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":28,"column":10},"generated":{"line":1,"column":699}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":28,"column":14},"generated":{"line":1,"column":703}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":1,"column":706}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":29,"column":10},"generated":{"line":1,"column":708}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":29,"column":14},"generated":{"line":1,"column":712}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":29,"column":21},"generated":{"line":1,"column":714}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":29,"column":27},"generated":{"line":1,"column":716}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":725}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":727}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":33,"column":2},"generated":{"line":1,"column":742}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":33,"column":2},"generated":{"line":1,"column":748}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":33,"column":2},"generated":{"line":1,"column":749}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":33,"column":9},"generated":{"line":1,"column":751}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":36,"column":0},"generated":{"line":1,"column":759}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":36,"column":9},"generated":{"line":1,"column":768}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":36,"column":22},"generated":{"line":1,"column":770}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":37,"column":2},"generated":{"line":1,"column":773}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":780}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":37,"column":13},"generated":{"line":1,"column":784}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":37,"column":21},"generated":{"line":1,"column":792}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":37,"column":22},"generated":{"line":1,"column":801}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":37,"column":31},"generated":{"line":1,"column":803}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":806}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":1,"column":810}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":38,"column":19},"generated":{"line":1,"column":812}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":38,"column":23},"generated":{"line":1,"column":816}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":1,"column":827}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":39,"column":11},"generated":{"line":1,"column":829}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":39,"column":23},"generated":{"line":1,"column":839}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":42,"column":6},"generated":{"line":1,"column":856}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":42,"column":32},"generated":{"line":1,"column":859}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":1,"column":863}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":42,"column":17},"generated":{"line":1,"column":865}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":876}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":43,"column":15},"generated":{"line":1,"column":883}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":43,"column":22},"generated":{"line":1,"column":885}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":43,"column":26},"generated":{"line":1,"column":889}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":43,"column":32},"generated":{"line":1,"column":895}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":6},"generated":{"line":1,"column":924}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":12},"generated":{"line":1,"column":928}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":35},"generated":{"line":1,"column":930}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":21},"generated":{"line":1,"column":938}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":1,"column":940}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":29},"generated":{"line":1,"column":942}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":35},"generated":{"line":1,"column":956}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":35},"generated":{"line":1,"column":960}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":35},"generated":{"line":1,"column":962}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":45,"column":39},"generated":{"line":1,"column":964}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":48,"column":12},"generated":{"line":1,"column":967}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":48,"column":25},"generated":{"line":1,"column":969}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":48,"column":32},"generated":{"line":1,"column":971}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":48,"column":40},"generated":{"line":1,"column":979}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":49,"column":12},"generated":{"line":1,"column":984}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":49,"column":25},"generated":{"line":1,"column":986}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":49,"column":39},"generated":{"line":1,"column":989}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":49,"column":43},"generated":{"line":1,"column":991}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":49,"column":56},"generated":{"line":1,"column":993}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":49,"column":60},"generated":{"line":1,"column":995}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":49,"column":67},"generated":{"line":1,"column":997}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":50,"column":6},"generated":{"line":1,"column":1004}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":50,"column":14},"generated":{"line":1,"column":1006}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":50,"column":21},"generated":{"line":1,"column":1008}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":50,"column":31},"generated":{"line":1,"column":1018}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":52,"column":4},"generated":{"line":1,"column":1023}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":52,"column":11},"generated":{"line":1,"column":1025}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":52,"column":21},"generated":{"line":1,"column":1033}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":1044}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":1051}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":52,"column":34},"generated":{"line":1,"column":1053}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":52,"column":38},"generated":{"line":1,"column":1057}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":52,"column":44},"generated":{"line":1,"column":1063}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":53,"column":4},"generated":{"line":1,"column":1081}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":53,"column":11},"generated":{"line":1,"column":1083}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":53,"column":21},"generated":{"line":1,"column":1091}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":53,"column":27},"generated":{"line":1,"column":1102}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":53,"column":27},"generated":{"line":1,"column":1109}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":53,"column":34},"generated":{"line":1,"column":1111}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":53,"column":41},"generated":{"line":1,"column":1113}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":55,"column":4},"generated":{"line":1,"column":1121}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":55,"column":11},"generated":{"line":1,"column":1123}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":55,"column":25},"generated":{"line":1,"column":1137}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":5,"column":13},"generated":{"line":1,"column":1142}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":5,"column":13},"generated":{"line":1,"column":1150}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":5,"column":48},"generated":{"line":1,"column":1166}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":5,"column":49},"generated":{"line":1,"column":1175}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":6,"column":2},"generated":{"line":1,"column":1178}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":6,"column":6},"generated":{"line":1,"column":1185}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":6,"column":24},"generated":{"line":1,"column":1198}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":7,"column":11},"generated":{"line":1,"column":1203}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":7,"column":23},"generated":{"line":1,"column":1205}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":10,"column":9},"generated":{"line":1,"column":1208}},{"source":"../../src/stream-collector.ts","name":null,"original":{"line":10,"column":23},"generated":{"line":1,"column":1210}}],"sources":{"../../src/stream-collector.ts":"import { StreamCollector } from \"@aws-sdk/types\";\nimport { fromBase64 } from \"@aws-sdk/util-base64-browser\";\n\n//reference: https://snack.expo.io/r1JCSWRGU\nexport const streamCollector: StreamCollector = (stream: Blob | ReadableStream): Promise<Uint8Array> => {\n  if (stream instanceof Blob) {\n    return collectBlob(stream);\n  }\n\n  return collectStream(stream);\n};\n\nasync function collectBlob(blob: Blob): Promise<Uint8Array> {\n  const base64 = await readToBase64(blob);\n  const arrayBuffer = fromBase64(base64);\n  return new Uint8Array(arrayBuffer);\n}\n\nasync function collectStream(stream: ReadableStream): Promise<Uint8Array> {\n  let res = new Uint8Array(0);\n  const reader = stream.getReader();\n  let isDone = false;\n  while (!isDone) {\n    const { done, value } = await reader.read();\n    if (value) {\n      const prior = res;\n      res = new Uint8Array(prior.length + value.length);\n      res.set(prior);\n      res.set(value, prior.length);\n    }\n    isDone = done;\n  }\n  return res;\n}\n\nfunction readToBase64(blob: Blob): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      // reference: https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n      // response from readAsDataURL is always prepended with \"data:*/*;base64,\"\n      if (reader.readyState !== 2) {\n        return reject(new Error(\"Reader aborted too early\"));\n      }\n      const result = (reader.result ?? \"\") as string;\n      // Response can include only 'data:' for empty blob, return empty string in this case.\n      // Otherwise, return the string after ','\n      const commaIndex = result.indexOf(\",\");\n      const dataOffset = commaIndex > -1 ? commaIndex + 1 : result.length;\n      resolve(result.substring(dataOffset));\n    };\n    reader.onabort = () => reject(new Error(\"Read aborted\"));\n    reader.onerror = () => reject(reader.error);\n    // reader.readAsArrayBuffer is not always available\n    reader.readAsDataURL(blob);\n  });\n}\n"},"lineCount":null}},"error":null,"hash":"26135b8733a825913f601d160dd7594d","cacheData":{"env":{}}}